{
    "version": 2,
    "builds": [
        {
            "src": "backend/src/server.ts",
            "use": "@vercel/node"
        },
        {
            "src": "frontend/index.html",
            "use": "@vercel/static"
        }
    ],
    "routes": [
        {
            "src": "/api/(.*)",
            "dest": "backend/dist/server.js"
        },
        {   
            "src": "/(.*)",
            "dest": "frontend/dist/$1"
        }
    ],
    "buildCommand": "npm install --prefix frontend && npm run build --prefix frontend && npm install --prefix backend && npm run build --prefix backend",
    "git": {
        "deploymentEnabled": {
            "frontend": true,
            "backend": true
        },
        "defaultProjectPath": "."
    }
}